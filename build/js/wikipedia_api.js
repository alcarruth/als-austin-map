// Generated by CoffeeScript 2.5.1
(function() {
  /**
   * source: wikipedia_api.coffee
   */
  /*
   *  ISC License (ISC)
   *  Copyright (c) 2016, Al Carruth <al.carruth@gmail.com>
   * 
   *  Permission to use, copy, modify, and/or distribute this software for
   *  any purpose with or without fee is hereby granted, provided that the
   *  above copyright notice and this permission notice appear in all
   *  copies.
   *
   *  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
   *  WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED
   *  WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
   *  AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR
   *  CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS
   *  OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT,
   *  NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN
   *  CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
   */
  var Wikipedia, ___dummy___;

  ___dummy___ = 'ignore this !-)';

  /* Class Wikipedia */
  /**
   * A Wikipedia instance has methods for simple queries and searches
   * using the wikipedia api.
   * @constructor
   * @param {String} api_User_Agent - a string identifying the app to wikipedia
   */
  Wikipedia = class Wikipedia {
    /* constructor */
    constructor(api_User_Agent) {
      /**
       * method handle_timeout()
       * a default timeout error handler for calls to method get() above
       * @param {Object} err - the error object
       */
      this.handle_Timeout = this.handle_Timeout.bind(this);
      /* method get() */
      this.get = this.get.bind(this);
      /**
       * method query()
       * performs the ajax request for a 'query' action
       * @param {Object} obj - a query string object
       */
      this.query = this.query.bind(this);
      /**
       * method openSearch()
       * performs the ajax request for an 'opensearch' action
       * @param {Object} obj - a query string object
       */
      this.openSearch = this.openSearch.bind(this);
      this.api_User_Agent = api_User_Agent;
      this.jsonp = new JSONP_Controller('https://en.wikipedia.org/w/api.php?');
    }

    handle_Timeout(err) {
      var msg;
      msg = "Wikipedia search results unavailable.";
      console.log(msg);
      return console.log(err);
    }

    get(obj, query) {
      var request;
      request = this.jsonp.make_Request({
        query: query,
        success: obj.success,
        error: obj.error || this.handle_Timeout,
        msec: obj.msec || 3000
      });
      return request.send();
    }

    query(obj) {
      return this.get(obj, {
        action: 'query',
        format: 'json',
        prop: 'revisions',
        rvprop: 'content',
        titles: obj.title
      });
    }

    openSearch(obj) {
      return this.get(obj, {
        action: 'opensearch',
        format: 'json',
        search: obj.search_Str
      });
    }

  };

  if (typeof window !== "undefined" && window !== null) {
    window.Wikipedia = Wikipedia;
  }

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lraXBlZGlhX2FwaS5qcyIsInNvdXJjZVJvb3QiOiIuLi8uLiIsInNvdXJjZXMiOlsic3JjL2NvZmZlZS93aWtpcGVkaWFfYXBpLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBRUc7RUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQSxTQUFBLEVBQUE7O0VBcUJILFdBQUEsR0FBYyxrQkFyQlg7Ozs7Ozs7OztFQThCRyxZQUFOLE1BQUEsVUFBQSxDQUFBOztJQUdJLFdBQWEsZUFBQSxDQUFBLEVBQUE7Ozs7OztVQVFiLENBQUEscUJBQUEsQ0FBQSwwQkFQSjs7VUFhSSxDQUFBLFVBQUEsQ0FBQSxlQWJKOzs7Ozs7VUEyQkksQ0FBQSxZQUFBLENBQUEsaUJBM0JKOzs7Ozs7VUF5Q0ksQ0FBQSxpQkFBQSxDQUFBO01BMUNjLElBQUMsQ0FBQTtNQUNYLElBQUMsQ0FBQSxLQUFELEdBQVMsSUFBSSxnQkFBSixDQUFxQixxQ0FBckI7SUFEQTs7SUFRYixjQUFnQixDQUFDLEdBQUQsQ0FBQTtBQUNwQixVQUFBO01BQVEsR0FBQSxHQUFNO01BQ04sT0FBTyxDQUFDLEdBQVIsQ0FBWSxHQUFaO2FBQ0EsT0FBTyxDQUFDLEdBQVIsQ0FBWSxHQUFaO0lBSFk7O0lBTWhCLEdBQUssQ0FBQyxHQUFELEVBQU0sS0FBTixDQUFBO0FBQ1QsVUFBQTtNQUFRLE9BQUEsR0FBVSxJQUFDLENBQUEsS0FBSyxDQUFDLFlBQVAsQ0FBb0I7UUFDMUIsS0FBQSxFQUFPLEtBRG1CO1FBRTFCLE9BQUEsRUFBUyxHQUFHLENBQUMsT0FGYTtRQUcxQixLQUFBLEVBQU8sR0FBRyxDQUFDLEtBQUosSUFBYSxJQUFDLENBQUEsY0FISztRQUkxQixJQUFBLEVBQU0sR0FBRyxDQUFDLElBQUosSUFBWTtNQUpRLENBQXBCO2FBTVYsT0FBTyxDQUFDLElBQVIsQ0FBQTtJQVBDOztJQWNMLEtBQU8sQ0FBQyxHQUFELENBQUE7YUFDSCxJQUFDLENBQUEsR0FBRCxDQUFLLEdBQUwsRUFBVTtRQUNOLE1BQUEsRUFBUSxPQURGO1FBRU4sTUFBQSxFQUFRLE1BRkY7UUFHTixJQUFBLEVBQU0sV0FIQTtRQUlOLE1BQUEsRUFBUSxTQUpGO1FBS04sTUFBQSxFQUFRLEdBQUcsQ0FBQztNQUxOLENBQVY7SUFERzs7SUFjUCxVQUFZLENBQUMsR0FBRCxDQUFBO2FBQ1IsSUFBQyxDQUFBLEdBQUQsQ0FBSyxHQUFMLEVBQVU7UUFDTixNQUFBLEVBQVEsWUFERjtRQUVOLE1BQUEsRUFBUSxNQUZGO1FBR04sTUFBQSxFQUFRLEdBQUcsQ0FBQztNQUhOLENBQVY7SUFEUTs7RUE3Q2hCOztFQW9EQSxJQUFHLGdEQUFIO0lBQ0ksTUFBTSxDQUFDLFNBQVAsR0FBbUIsVUFEdkI7O0FBbEZHIiwic291cmNlc0NvbnRlbnQiOlsiIyMjKlxuICogc291cmNlOiB3aWtpcGVkaWFfYXBpLmNvZmZlZVxuIyMjXG5cbiMjI1xuICogIElTQyBMaWNlbnNlIChJU0MpXG4gKiAgQ29weXJpZ2h0IChjKSAyMDE2LCBBbCBDYXJydXRoIDxhbC5jYXJydXRoQGdtYWlsLmNvbT5cbiAqIFxuICogIFBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yXG4gKiAgYW55IHB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZCwgcHJvdmlkZWQgdGhhdCB0aGVcbiAqICBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIGFwcGVhciBpbiBhbGxcbiAqICBjb3BpZXMuXG4gKlxuICogIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTFxuICogIFdBUlJBTlRJRVMgV0lUSCBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRURcbiAqICBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gKiAgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCwgSU5ESVJFQ1QsIE9SXG4gKiAgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST00gTE9TU1xuICogIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCxcbiAqICBORUdMSUdFTkNFIE9SIE9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU5cbiAqICBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUiBQRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxuIyMjXG5cbl9fX2R1bW15X19fID0gJ2lnbm9yZSB0aGlzICEtKSdcblxuIyMjIENsYXNzIFdpa2lwZWRpYSAjIyNcbiMjIypcbiAqIEEgV2lraXBlZGlhIGluc3RhbmNlIGhhcyBtZXRob2RzIGZvciBzaW1wbGUgcXVlcmllcyBhbmQgc2VhcmNoZXNcbiAqIHVzaW5nIHRoZSB3aWtpcGVkaWEgYXBpLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge1N0cmluZ30gYXBpX1VzZXJfQWdlbnQgLSBhIHN0cmluZyBpZGVudGlmeWluZyB0aGUgYXBwIHRvIHdpa2lwZWRpYVxuIyMjXG5jbGFzcyBXaWtpcGVkaWFcblxuICAgICMjIyBjb25zdHJ1Y3RvciAjIyNcbiAgICBjb25zdHJ1Y3RvcjogKEBhcGlfVXNlcl9BZ2VudCkgLT5cbiAgICAgICAgQGpzb25wID0gbmV3IEpTT05QX0NvbnRyb2xsZXIoJ2h0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93L2FwaS5waHA/JylcblxuICAgICMjIypcbiAgICAgKiBtZXRob2QgaGFuZGxlX3RpbWVvdXQoKVxuICAgICAqIGEgZGVmYXVsdCB0aW1lb3V0IGVycm9yIGhhbmRsZXIgZm9yIGNhbGxzIHRvIG1ldGhvZCBnZXQoKSBhYm92ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBlcnIgLSB0aGUgZXJyb3Igb2JqZWN0XG4gICAgIyMjXG4gICAgaGFuZGxlX1RpbWVvdXQ6IChlcnIpID0+XG4gICAgICAgIG1zZyA9IFwiV2lraXBlZGlhIHNlYXJjaCByZXN1bHRzIHVuYXZhaWxhYmxlLlwiXG4gICAgICAgIGNvbnNvbGUubG9nKG1zZylcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuXG4gICAgIyMjIG1ldGhvZCBnZXQoKSAjIyNcbiAgICBnZXQ6IChvYmosIHF1ZXJ5KSA9PlxuICAgICAgICByZXF1ZXN0ID0gQGpzb25wLm1ha2VfUmVxdWVzdCh7XG4gICAgICAgICAgICBxdWVyeTogcXVlcnlcbiAgICAgICAgICAgIHN1Y2Nlc3M6IG9iai5zdWNjZXNzXG4gICAgICAgICAgICBlcnJvcjogb2JqLmVycm9yIHx8IEBoYW5kbGVfVGltZW91dFxuICAgICAgICAgICAgbXNlYzogb2JqLm1zZWMgfHwgMzAwMFxuICAgICAgICB9KVxuICAgICAgICByZXF1ZXN0LnNlbmQoKVxuXG4gICAgIyMjKlxuICAgICAqIG1ldGhvZCBxdWVyeSgpXG4gICAgICogcGVyZm9ybXMgdGhlIGFqYXggcmVxdWVzdCBmb3IgYSAncXVlcnknIGFjdGlvblxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSBhIHF1ZXJ5IHN0cmluZyBvYmplY3RcbiAgICAjIyNcbiAgICBxdWVyeTogKG9iaikgPT5cbiAgICAgICAgQGdldChvYmosIHsgXG4gICAgICAgICAgICBhY3Rpb246ICdxdWVyeSdcbiAgICAgICAgICAgIGZvcm1hdDogJ2pzb24nXG4gICAgICAgICAgICBwcm9wOiAncmV2aXNpb25zJ1xuICAgICAgICAgICAgcnZwcm9wOiAnY29udGVudCdcbiAgICAgICAgICAgIHRpdGxlczogb2JqLnRpdGxlXG4gICAgICAgIH0pXG5cbiAgICAjIyMqXG4gICAgICogbWV0aG9kIG9wZW5TZWFyY2goKVxuICAgICAqIHBlcmZvcm1zIHRoZSBhamF4IHJlcXVlc3QgZm9yIGFuICdvcGVuc2VhcmNoJyBhY3Rpb25cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIC0gYSBxdWVyeSBzdHJpbmcgb2JqZWN0XG4gICAgIyMjXG4gICAgb3BlblNlYXJjaDogKG9iaikgPT5cbiAgICAgICAgQGdldChvYmosIHtcbiAgICAgICAgICAgIGFjdGlvbjogJ29wZW5zZWFyY2gnXG4gICAgICAgICAgICBmb3JtYXQ6ICdqc29uJ1xuICAgICAgICAgICAgc2VhcmNoOiBvYmouc2VhcmNoX1N0clxuICAgICAgICB9KVxuXG5pZiB3aW5kb3c/XG4gICAgd2luZG93Lldpa2lwZWRpYSA9IFdpa2lwZWRpYVxuIl19
//# sourceURL=/usr/local/server/git/clones/als-austin-map/src/coffee/wikipedia_api.coffee