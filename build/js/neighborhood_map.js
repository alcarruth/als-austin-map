// Generated by CoffeeScript 2.5.1
(function() {
  /**
   * source: neighborhood_map.coffee
   */
  /* Class Marker_View */
  /**
   * A Marker_View is a view of a place as a map marker on the map.
   * @constructor
   * @param {PLace} place - an instance of the Place class 
   * @param {Map_View} map_View - an instance of the Map_View class 
   */
  /*
   *  ISC License (ISC)
   *  Copyright (c) 2016, Al Carruth <al.carruth@gmail.com>
   * 
   *  Permission to use, copy, modify, and/or distribute this software for
   *  any purpose with or without fee is hereby granted, provided that the
   *  above copyright notice and this permission notice appear in all
   *  copies.
   *
   *  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
   *  WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED
   *  WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
   *  AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR
   *  CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS
   *  OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT,
   *  NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN
   *  CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
   */
  var Info_View, Map_View, Marker_View, Menu_View, Neighborhood_Map, Place, ___dummy___, neighborhood_Map;

  ___dummy___ = 'ignore this !-)';

  /* Class Menu_View */
  /**
   * A Menu_View is a view of the neighborhood places as a list of clickable items
   * @constructor
   * @param {Neighborhood_Map} app - the main neighborhood map instance
   */
  Menu_View = class Menu_View {
    /* constructor */
    constructor(app) {
      /**
       * method toggle()
       * toggles the visibility of the menu
       */
      this.toggle = this.toggle.bind(this);
      this.app = app;
      this.menu_Element = document.getElementById('menu-view');
      this.menu_Button = document.getElementById('menu-button');
      this.hidden = ko.observable(false);
    }

    toggle() {
      return this.hidden(!this.hidden());
    }

  };

  /* Class Map_View */
  /**
   * A Map_View is a view of the neighbohood places on a map.
   * @constructor
   * @param {Neighborhood_Map} app - the main neighborhood map instance
   */
  Map_View = class Map_View {
    /* constructor */
    constructor(app) {
      this.init = this.init.bind(this);
      this.error = this.error.bind(this);
      this.app = app;
      this.map_Element = document.getElementById('map-view');
      this.gm_request = this.app.google_Maps.get({
        query: {
          libraries: 'places'
        },
        success: this.init,
        error: this.error,
        msec: 3000
      });
    }

    init() {
      this.map = new google.maps.Map(this.map_Element, {
        center: {
          lat: 30.2712406,
          lng: -97.7555901
        },
        scrollwheel: true,
        zoom: 13,
        disableDefaultUI: true,
        callback: this.error
      });
      return this.app.map_Ready();
    }

    error(err) {
      return window.alert("Google Maps is currently unavailable");
    }

  };

  Marker_View = (function() {
    var marker_Highlight_Icon, marker_Icon;

    class Marker_View {
      /* constructor */
      constructor(place1, map_View) {
        /* method display() */
        this.display = this.display.bind(this);
        /* method highlight() */
        this.highlight = this.highlight.bind(this);
        this.place = place1;
        this.map_View = map_View;
        this.marker = new google.maps.Marker({
          position: this.place.loc,
          optimized: false,
          zIndex: 1000,
          map: this.map_View.map,
          title: this.place.name(),
          icon: marker_Icon,
          opacity: 1.0
        });
        this.marker.addListener('click', this.place.click);
        this.place.visible.subscribe(this.display);
        this.place.selected.subscribe(this.highlight);
      }

      display(show_marker) {
        return this.marker.setVisible(show_marker);
      }

      highlight(hl_true) {
        if (hl_true) {
          this.marker.setIcon(marker_Highlight_Icon);
          return this.marker.setZIndex(1001);
        } else {
          this.marker.setIcon(marker_Icon);
          return this.marker.setZIndex(1000);
        }
      }

    };

    marker_Icon = "https://maps.google.com/mapfiles/ms/icons/green-dot.png";

    marker_Highlight_Icon = "https://maps.google.com/mapfiles/ms/icons/blue-dot.png";

    return Marker_View;

  }).call(this);

  /* Class Info_View */
  /**
   * An Info_View is a view of a Place as a popup InfoWindow
   * @constructor
   * @param {Place} place
   * @param {Map_View} map_View
   * @param {Marker_View} marker_View
   */
  Info_View = class Info_View {
    /* constructor */
    constructor(place1, map_View, marker_View) {
      var s;
      /**
       * method display_Info()
       * helper function for method display_Wikipedia_Info()
       * @param {Object} obj - contains title, description and url
       */
      this.display_Info = this.display_Info.bind(this);
      /**
       * method display_Wikipedia_Info()
       * display either the info from wikipedia or an error message
       * @param {Boolean} show_marker - to display or not display
       */
      this.display_Wikipedia_Info = this.display_Wikipedia_Info.bind(this);
      /**
       * method display()
       * @param {Boolean} show_window - to display or not display
       */
      this.display = this.display.bind(this);
      this.place = place1;
      this.map_View = map_View;
      this.marker_View = marker_View;
      this.wikipedia_Info = void 0;
      s = '<span class="error-msg"> Wikipedia is currently unavailable. </span> <br>';
      this.error_Msg = s + '<span class="error-msg"> Please try again later. </span>';
      this.info_Window = new google.maps.InfoWindow({
        maxWidth: 250
      });
      this.info_Window.addListener('closeclick', this.place.click);
      this.place.show_info.subscribe(this.display);
    }

    display_Info(obj) {
      var s;
      s = '' + '<div class="info-window">' + '<h1 class="info-window-h1">' + obj.title + '</h1>' + '<p class="info-window-p">' + obj.description + '</p>' + '<a href="' + obj.url + '" target="_blank"> Wikipedia </a>' + '</div>';
      this.info_Window.setContent(s);
      return this.info_Window.open(this.map_View.map, this.marker_View.marker);
    }

    display_Wikipedia_Info() {
      if (typeof this.wikipedia_Info !== 'undefined') {
        return this.display_Info(this.wikipedia_Info);
      } else {
        return this.place.app.wikipedia.openSearch({
          search_Str: this.place.wikipedia_Title,
          success: ((data) => {
            this.wikipedia_Info = {
              title: data[1][0],
              description: data[2][0],
              url: data[3][0]
            };
            return this.display_Info(this.wikipedia_Info);
          }),
          error: (() => {
            return this.display_Info({
              title: this.place.name(),
              description: this.error_Msg,
              url: "https://en.wikipedia.org/"
            });
          })
        });
      }
    }

    display(show_Window) {
      if (show_Window) {
        return this.display_Wikipedia_Info();
      } else {
        return this.info_Window.close();
      }
    }

  };

  /* Class Place */
  /**
   * A Place is part of the view model.  It is constructed from a simple object
   * and is associated with a Marker_View, an Info_View and a
   * div.menu-list-item element as part of the Menu_View.
   * @constructor
   * @param {object} obj - a simple object containing the name, location and wikipedia title
   * @param {Neighborhood_Map} @app - the main app instance
   */
  Place = class Place {
    /* constructor */
    constructor(obj, app) {
      this.map_Ready = this.map_Ready.bind(this);
      /**
       * method click() handles all clicks whether on the menu items or
       * on the map markers and cycles through the states appropriately
       */
      this.click = this.click.bind(this);
      /**
       * method display
       * @param {Boolean} boolean_expr - to display or not display
       */
      this.display = this.display.bind(this);
      this.app = app;
      this.loc = obj.loc;
      this.name = ko.observable(obj.name);
      this.wikipedia_Title = obj.wikipedia_title;
      this.state = ko.observable(1);
      this.hidden = ko.computed(() => {
        return this.state() === 0;
      });
      this.visible = ko.computed(() => {
        return this.state() > 0;
      });
      this.selected = ko.computed(() => {
        return this.state() > 1;
      });
      //@show_info = ko.computed(=> @state() > 2)
      this.show_info = ko.computed(() => {
        return this.state() > 1;
      });
    }

    map_Ready() {
      this.marker_View = new Marker_View(this, this.app.map_View);
      return this.info_View = new Info_View(this, this.app.map_View, this.marker_View);
    }

    click() {
      var i, len, place, ref;
      ref = this.app.places();
      /* de-select all other places */
      for (i = 0, len = ref.length; i < len; i++) {
        place = ref[i];
        if (place !== this && place.state() > 1) {
          place.state(1);
        }
      }
      /* change to next state */
      //@state([1,2,3,2][@state()])
      this.state([1, 2, 1][this.state()]);
      /* hide the menu after selection when in cell phone mode. */
      if (window.innerWidth < 700) {
        return this.app.menu_View.hidden(true);
      }
    }

    display(bool_expr) {
      if (bool_expr) {
        return this.state(Math.max(1, this.state()));
      } else {
        return this.state(0);
      }
    }

  };

  /* Class Neighborhood_Map */
  /**
   * An instance of class Neighborhood_Map is the main app.
   * @constructor
   */
  Neighborhood_Map = class Neighborhood_Map {
    /* constructor */
    constructor() {
      /**
       * method map_Ready
       */
      this.map_Ready = this.map_Ready.bind(this);
      /**
       * method init
       * @param {JSON} places_JSON - a json string representing an array of simple place objects
       */
      this.init = this.init.bind(this);
      /**
       * method search
       * @param {String} pat - the patern to search for
       */
      this.search = this.search.bind(this);
      this.wikipedia = new Wikipedia('Map of Austin places');
      this.google_Maps = new Google_Maps("AIzaSyBjtVDpeVL8JzhYqCXt8d6E3bRanaNCXEo");
      this.places = ko.observableArray([]);
      this.menu_View = new Menu_View(this);
      this.map_View = new Map_View(this);
      this.app_Element = document.getElementById('neighborhood-map');
      this.search_Str = ko.observable('');
      this.search_Str.subscribe(this.search);
      ko.applyBindings(this, this.app_Element);
    }

    map_Ready() {
      var i, len, place, ref, results;
      ref = this.places();
      results = [];
      for (i = 0, len = ref.length; i < len; i++) {
        place = ref[i];
        results.push(place.map_Ready());
      }
      return results;
    }

    init(places_JSON) {
      var i, len, obj, ref, results;
      this.places_JSON = places_JSON;
      this.places([]);
      ref = JSON.parse(this.places_JSON);
      results = [];
      for (i = 0, len = ref.length; i < len; i++) {
        obj = ref[i];
        results.push(this.places.push(new Place(obj, this)));
      }
      return results;
    }

    search(pat) {
      var expr, i, len, place, ref, results;
      expr = RegExp(pat, 'i');
      ref = this.places();
      results = [];
      for (i = 0, len = ref.length; i < len; i++) {
        place = ref[i];
        results.push(place.display(expr.test(place.name())));
      }
      return results;
    }

  };

  if (typeof window !== "undefined" && window !== null) {
    neighborhood_Map = new Neighborhood_Map();
    neighborhood_Map.init(austin_Places_JSON);
    window.neighborhood_Map = neighborhood_Map;
  }

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmVpZ2hib3Job29kX21hcC5qcyIsInNvdXJjZVJvb3QiOiIuLi8uLiIsInNvdXJjZXMiOlsic3JjL2NvZmZlZS9uZWlnaGJvcmhvb2RfbWFwLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBRUc7RUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUEsU0FBQSxFQUFBLFFBQUEsRUFBQSxXQUFBLEVBQUEsU0FBQSxFQUFBLGdCQUFBLEVBQUEsS0FBQSxFQUFBLFdBQUEsRUFBQTs7RUFxQkgsV0FBQSxHQUFjLGtCQXJCWDs7Ozs7Ozs7RUE2QkcsWUFBTixNQUFBLFVBQUEsQ0FBQTs7SUFHSSxXQUFhLElBQUEsQ0FBQSxFQUFBOzs7OztVQVNiLENBQUEsYUFBQSxDQUFBO01BVGMsSUFBQyxDQUFBO01BQ1gsSUFBQyxDQUFBLFlBQUQsR0FBZ0IsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsV0FBeEI7TUFDaEIsSUFBQyxDQUFBLFdBQUQsR0FBZSxRQUFRLENBQUMsY0FBVCxDQUF3QixhQUF4QjtNQUNmLElBQUMsQ0FBQSxNQUFELEdBQVUsRUFBRSxDQUFDLFVBQUgsQ0FBYyxLQUFkO0lBSEQ7O0lBU2IsTUFBUSxDQUFBLENBQUE7YUFBRyxJQUFDLENBQUEsTUFBRCxDQUFRLENBQUksSUFBQyxDQUFBLE1BQUQsQ0FBQSxDQUFaO0lBQUg7O0VBWlosRUE3Qkc7Ozs7Ozs7O0VBa0RHLFdBQU4sTUFBQSxTQUFBLENBQUE7O0lBR0ksV0FBYSxJQUFBLENBQUE7VUFTYixDQUFBLFdBQUEsQ0FBQTtVQVVBLENBQUEsWUFBQSxDQUFBO01BbkJjLElBQUMsQ0FBQTtNQUNYLElBQUMsQ0FBQSxXQUFELEdBQWUsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsVUFBeEI7TUFDZixJQUFDLENBQUEsVUFBRCxHQUFjLElBQUMsQ0FBQSxHQUFHLENBQUMsV0FBVyxDQUFDLEdBQWpCLENBQXFCO1FBQy9CLEtBQUEsRUFBTztVQUFFLFNBQUEsRUFBVztRQUFiLENBRHdCO1FBRS9CLE9BQUEsRUFBUyxJQUFDLENBQUEsSUFGcUI7UUFHL0IsS0FBQSxFQUFPLElBQUMsQ0FBQSxLQUh1QjtRQUkvQixJQUFBLEVBQU07TUFKeUIsQ0FBckI7SUFGTDs7SUFTYixJQUFNLENBQUEsQ0FBQTtNQUNGLElBQUMsQ0FBQSxHQUFELEdBQU8sSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQWhCLENBQXFCLElBQUMsQ0FBQSxXQUF0QixFQUFtQztRQUN0QyxNQUFBLEVBQVE7VUFBRSxHQUFBLEVBQUssVUFBUDtVQUFtQixHQUFBLEVBQUssQ0FBQztRQUF6QixDQUQ4QjtRQUV0QyxXQUFBLEVBQWEsSUFGeUI7UUFHdEMsSUFBQSxFQUFNLEVBSGdDO1FBSXRDLGdCQUFBLEVBQWtCLElBSm9CO1FBS3RDLFFBQUEsRUFBVSxJQUFDLENBQUE7TUFMMkIsQ0FBbkM7YUFPUCxJQUFDLENBQUEsR0FBRyxDQUFDLFNBQUwsQ0FBQTtJQVJFOztJQVVOLEtBQU8sQ0FBQyxHQUFELENBQUE7YUFDSCxNQUFNLENBQUMsS0FBUCxDQUFhLHNDQUFiO0lBREc7O0VBdEJYOztFQWlDTTs7O0lBQU4sTUFBQSxZQUFBLENBQUE7O01BTUksV0FBYSxPQUFBLFVBQUEsQ0FBQSxFQUFBOztZQWViLENBQUEsY0FBQSxDQUFBLG1CQWRKOztZQWtCSSxDQUFBLGdCQUFBLENBQUE7UUFuQmMsSUFBQyxDQUFBO1FBQU8sSUFBQyxDQUFBO1FBQ25CLElBQUMsQ0FBQSxNQUFELEdBQVUsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQWhCLENBQXVCO1VBQzdCLFFBQUEsRUFBVSxJQUFDLENBQUEsS0FBSyxDQUFDLEdBRFk7VUFFN0IsU0FBQSxFQUFXLEtBRmtCO1VBRzdCLE1BQUEsRUFBTyxJQUhzQjtVQUk3QixHQUFBLEVBQUssSUFBQyxDQUFBLFFBQVEsQ0FBQyxHQUpjO1VBSzdCLEtBQUEsRUFBTyxJQUFDLENBQUEsS0FBSyxDQUFDLElBQVAsQ0FBQSxDQUxzQjtVQU03QixJQUFBLEVBQU0sV0FOdUI7VUFPN0IsT0FBQSxFQUFTO1FBUG9CLENBQXZCO1FBU1YsSUFBQyxDQUFBLE1BQU0sQ0FBQyxXQUFSLENBQW9CLE9BQXBCLEVBQTZCLElBQUMsQ0FBQSxLQUFLLENBQUMsS0FBcEM7UUFDQSxJQUFDLENBQUEsS0FBSyxDQUFDLE9BQU8sQ0FBQyxTQUFmLENBQXlCLElBQUMsQ0FBQSxPQUExQjtRQUNBLElBQUMsQ0FBQSxLQUFLLENBQUMsUUFBUSxDQUFDLFNBQWhCLENBQTBCLElBQUMsQ0FBQSxTQUEzQjtNQVpTOztNQWViLE9BQVMsQ0FBQyxXQUFELENBQUE7ZUFDTCxJQUFDLENBQUEsTUFBTSxDQUFDLFVBQVIsQ0FBbUIsV0FBbkI7TUFESzs7TUFJVCxTQUFXLENBQUMsT0FBRCxDQUFBO1FBQ1AsSUFBRyxPQUFIO1VBQ0ksSUFBQyxDQUFBLE1BQU0sQ0FBQyxPQUFSLENBQWdCLHFCQUFoQjtpQkFDQSxJQUFDLENBQUEsTUFBTSxDQUFDLFNBQVIsQ0FBa0IsSUFBbEIsRUFGSjtTQUFBLE1BQUE7VUFJSSxJQUFDLENBQUEsTUFBTSxDQUFDLE9BQVIsQ0FBZ0IsV0FBaEI7aUJBQ0EsSUFBQyxDQUFBLE1BQU0sQ0FBQyxTQUFSLENBQWtCLElBQWxCLEVBTEo7O01BRE87O0lBekJmOztJQUVJLFdBQUEsR0FBYzs7SUFDZCxxQkFBQSxHQUF3Qjs7OztnQkF0RnpCOzs7Ozs7Ozs7O0VBNkhHLFlBQU4sTUFBQSxVQUFBLENBQUE7O0lBR0ksV0FBYSxPQUFBLFVBQUEsYUFBQSxDQUFBO0FBQ2pCLFVBQUEsQ0FBQTs7Ozs7O1VBWUksQ0FBQSxtQkFBQSxDQUFBLHdCQVpKOzs7Ozs7VUEyQkksQ0FBQSw2QkFBQSxDQUFBLGtDQTNCSjs7Ozs7VUFtREksQ0FBQSxjQUFBLENBQUE7TUFwRGMsSUFBQyxDQUFBO01BQU8sSUFBQyxDQUFBO01BQVUsSUFBQyxDQUFBO01BQzlCLElBQUMsQ0FBQSxjQUFELEdBQWtCO01BQ2xCLENBQUEsR0FBSTtNQUNKLElBQUMsQ0FBQSxTQUFELEdBQWEsQ0FBQSxHQUFJO01BQ2pCLElBQUMsQ0FBQSxXQUFELEdBQWUsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQWhCLENBQTRCO1FBQUEsUUFBQSxFQUFVO01BQVYsQ0FBNUI7TUFDZixJQUFDLENBQUEsV0FBVyxDQUFDLFdBQWIsQ0FBeUIsWUFBekIsRUFBdUMsSUFBQyxDQUFBLEtBQUssQ0FBQyxLQUE5QztNQUNBLElBQUMsQ0FBQSxLQUFLLENBQUMsU0FBUyxDQUFDLFNBQWpCLENBQTJCLElBQUMsQ0FBQSxPQUE1QjtJQU5TOztJQWFiLFlBQWMsQ0FBQyxHQUFELENBQUE7QUFDbEIsVUFBQTtNQUFRLENBQUEsR0FBSSxFQUFBLEdBQ0EsMkJBREEsR0FFQSw2QkFGQSxHQUVnQyxHQUFHLENBQUMsS0FGcEMsR0FFNEMsT0FGNUMsR0FHQSwyQkFIQSxHQUc4QixHQUFHLENBQUMsV0FIbEMsR0FHZ0QsTUFIaEQsR0FJQSxXQUpBLEdBSWMsR0FBRyxDQUFDLEdBSmxCLEdBSXdCLG1DQUp4QixHQUtBO01BQ0osSUFBQyxDQUFBLFdBQVcsQ0FBQyxVQUFiLENBQXdCLENBQXhCO2FBQ0EsSUFBQyxDQUFBLFdBQVcsQ0FBQyxJQUFiLENBQWtCLElBQUMsQ0FBQSxRQUFRLENBQUMsR0FBNUIsRUFBaUMsSUFBQyxDQUFBLFdBQVcsQ0FBQyxNQUE5QztJQVJVOztJQWVkLHNCQUF3QixDQUFBLENBQUE7TUFDcEIsSUFBRyxPQUFPLElBQUMsQ0FBQSxjQUFSLEtBQTJCLFdBQTlCO2VBQ0ksSUFBQyxDQUFBLFlBQUQsQ0FBYyxJQUFDLENBQUEsY0FBZixFQURKO09BQUEsTUFBQTtlQUdJLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxVQUFyQixDQUFpQztVQUM3QixVQUFBLEVBQVksSUFBQyxDQUFBLEtBQUssQ0FBQyxlQURVO1VBRTdCLE9BQUEsRUFBUyxDQUFDLENBQUMsSUFBRCxDQUFBLEdBQUE7WUFDTixJQUFDLENBQUEsY0FBRCxHQUFrQjtjQUNkLEtBQUEsRUFBTyxJQUFJLENBQUMsQ0FBRCxDQUFHLENBQUMsQ0FBRCxDQURBO2NBRWQsV0FBQSxFQUFhLElBQUksQ0FBQyxDQUFELENBQUcsQ0FBQyxDQUFELENBRk47Y0FHZCxHQUFBLEVBQUssSUFBSSxDQUFDLENBQUQsQ0FBRyxDQUFDLENBQUQ7WUFIRTttQkFLbEIsSUFBQyxDQUFBLFlBQUQsQ0FBYyxJQUFDLENBQUEsY0FBZjtVQU5NLENBQUQsQ0FGb0I7VUFTN0IsS0FBQSxFQUFPLENBQUMsQ0FBQSxDQUFBLEdBQUE7bUJBQ0osSUFBQyxDQUFBLFlBQUQsQ0FBYztjQUNWLEtBQUEsRUFBTyxJQUFDLENBQUEsS0FBSyxDQUFDLElBQVAsQ0FBQSxDQURHO2NBRVYsV0FBQSxFQUFhLElBQUMsQ0FBQSxTQUZKO2NBR1YsR0FBQSxFQUFLO1lBSEssQ0FBZDtVQURJLENBQUQ7UUFUc0IsQ0FBakMsRUFISjs7SUFEb0I7O0lBd0J4QixPQUFTLENBQUMsV0FBRCxDQUFBO01BQ0wsSUFBRyxXQUFIO2VBQ0ksSUFBQyxDQUFBLHNCQUFELENBQUEsRUFESjtPQUFBLE1BQUE7ZUFHSSxJQUFDLENBQUEsV0FBVyxDQUFDLEtBQWIsQ0FBQSxFQUhKOztJQURLOztFQXZEYixFQTdIRzs7Ozs7Ozs7Ozs7RUFvTUcsUUFBTixNQUFBLE1BQUEsQ0FBQTs7SUFHSSxXQUFhLENBQUMsR0FBRCxLQUFBLENBQUE7VUFXYixDQUFBLGdCQUFBLENBQUEscUJBVko7Ozs7O1VBa0JJLENBQUEsWUFBQSxDQUFBLGlCQWxCSjs7Ozs7VUFxQ0ksQ0FBQSxjQUFBLENBQUE7TUF0Q21CLElBQUMsQ0FBQTtNQUNoQixJQUFDLENBQUEsR0FBRCxHQUFPLEdBQUcsQ0FBQztNQUNYLElBQUMsQ0FBQSxJQUFELEdBQVEsRUFBRSxDQUFDLFVBQUgsQ0FBYyxHQUFHLENBQUMsSUFBbEI7TUFDUixJQUFDLENBQUEsZUFBRCxHQUFtQixHQUFHLENBQUM7TUFDdkIsSUFBQyxDQUFBLEtBQUQsR0FBUyxFQUFFLENBQUMsVUFBSCxDQUFjLENBQWQ7TUFDVCxJQUFDLENBQUEsTUFBRCxHQUFVLEVBQUUsQ0FBQyxRQUFILENBQVksQ0FBQSxDQUFBLEdBQUE7ZUFBRyxJQUFDLENBQUEsS0FBRCxDQUFBLENBQUEsS0FBWTtNQUFmLENBQVo7TUFDVixJQUFDLENBQUEsT0FBRCxHQUFXLEVBQUUsQ0FBQyxRQUFILENBQVksQ0FBQSxDQUFBLEdBQUE7ZUFBRyxJQUFDLENBQUEsS0FBRCxDQUFBLENBQUEsR0FBVztNQUFkLENBQVo7TUFDWCxJQUFDLENBQUEsUUFBRCxHQUFZLEVBQUUsQ0FBQyxRQUFILENBQVksQ0FBQSxDQUFBLEdBQUE7ZUFBRyxJQUFDLENBQUEsS0FBRCxDQUFBLENBQUEsR0FBVztNQUFkLENBQVosRUFOcEI7O01BUVEsSUFBQyxDQUFBLFNBQUQsR0FBYSxFQUFFLENBQUMsUUFBSCxDQUFZLENBQUEsQ0FBQSxHQUFBO2VBQUcsSUFBQyxDQUFBLEtBQUQsQ0FBQSxDQUFBLEdBQVc7TUFBZCxDQUFaO0lBVEo7O0lBV2IsU0FBVyxDQUFBLENBQUE7TUFDUCxJQUFDLENBQUEsV0FBRCxHQUFlLElBQUksV0FBSixDQUFnQixJQUFoQixFQUFzQixJQUFDLENBQUEsR0FBRyxDQUFDLFFBQTNCO2FBQ2YsSUFBQyxDQUFBLFNBQUQsR0FBYSxJQUFJLFNBQUosQ0FBYyxJQUFkLEVBQW9CLElBQUMsQ0FBQSxHQUFHLENBQUMsUUFBekIsRUFBbUMsSUFBQyxDQUFBLFdBQXBDO0lBRk47O0lBUVgsS0FBTyxDQUFBLENBQUE7QUFFWCxVQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsS0FBQSxFQUFBO0FBQ1E7O01BQUEsS0FBQSxxQ0FBQTs7UUFDSSxJQUFHLEtBQUEsS0FBUyxJQUFULElBQWtCLEtBQUssQ0FBQyxLQUFOLENBQUEsQ0FBQSxHQUFnQixDQUFyQztVQUNJLEtBQUssQ0FBQyxLQUFOLENBQVksQ0FBWixFQURKOztNQURKLENBRFI7OztNQU9RLElBQUMsQ0FBQSxLQUFELENBQU8sQ0FBQyxDQUFELEVBQUcsQ0FBSCxFQUFLLENBQUwsQ0FBTyxDQUFDLElBQUMsQ0FBQSxLQUFELENBQUEsQ0FBRCxDQUFkLEVBUFI7O01BVVEsSUFBRyxNQUFNLENBQUMsVUFBUCxHQUFvQixHQUF2QjtlQUNJLElBQUMsQ0FBQSxHQUFHLENBQUMsU0FBUyxDQUFDLE1BQWYsQ0FBc0IsSUFBdEIsRUFESjs7SUFaRzs7SUFtQlAsT0FBUyxDQUFDLFNBQUQsQ0FBQTtNQUNMLElBQUcsU0FBSDtlQUNJLElBQUMsQ0FBQSxLQUFELENBQU8sSUFBSSxDQUFDLEdBQUwsQ0FBUyxDQUFULEVBQVksSUFBQyxDQUFBLEtBQUQsQ0FBQSxDQUFaLENBQVAsRUFESjtPQUFBLE1BQUE7ZUFHSSxJQUFDLENBQUEsS0FBRCxDQUFPLENBQVAsRUFISjs7SUFESzs7RUF6Q2IsRUFwTUc7Ozs7Ozs7RUF5UEcsbUJBQU4sTUFBQSxpQkFBQSxDQUFBOztJQUdJLFdBQWEsQ0FBQSxDQUFBLEVBQUE7Ozs7VUFjYixDQUFBLGdCQUFBLENBQUEscUJBYko7Ozs7O1VBcUJJLENBQUEsV0FBQSxDQUFBLGdCQXJCSjs7Ozs7VUE4QkksQ0FBQSxhQUFBLENBQUE7TUE5QkksSUFBQyxDQUFBLFNBQUQsR0FBYSxJQUFJLFNBQUosQ0FBYyxzQkFBZDtNQUNiLElBQUMsQ0FBQSxXQUFELEdBQWUsSUFBSSxXQUFKLENBQWdCLHlDQUFoQjtNQUNmLElBQUMsQ0FBQSxNQUFELEdBQVUsRUFBRSxDQUFDLGVBQUgsQ0FBbUIsRUFBbkI7TUFDVixJQUFDLENBQUEsU0FBRCxHQUFhLElBQUksU0FBSixDQUFjLElBQWQ7TUFDYixJQUFDLENBQUEsUUFBRCxHQUFZLElBQUksUUFBSixDQUFhLElBQWI7TUFDWixJQUFDLENBQUEsV0FBRCxHQUFlLFFBQVEsQ0FBQyxjQUFULENBQXdCLGtCQUF4QjtNQUNmLElBQUMsQ0FBQSxVQUFELEdBQWMsRUFBRSxDQUFDLFVBQUgsQ0FBYyxFQUFkO01BQ2QsSUFBQyxDQUFBLFVBQVUsQ0FBQyxTQUFaLENBQXNCLElBQUMsQ0FBQSxNQUF2QjtNQUNBLEVBQUUsQ0FBQyxhQUFILENBQWtCLElBQWxCLEVBQXdCLElBQUMsQ0FBQSxXQUF6QjtJQVRTOztJQWNiLFNBQVcsQ0FBQSxDQUFBO0FBQ2YsVUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLEtBQUEsRUFBQSxHQUFBLEVBQUE7QUFBUTtBQUFBO01BQUEsS0FBQSxxQ0FBQTs7cUJBQ0ksS0FBSyxDQUFDLFNBQU4sQ0FBQTtNQURKLENBQUE7O0lBRE87O0lBUVgsSUFBTSxZQUFBLENBQUE7QUFDVixVQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQTtNQURXLElBQUMsQ0FBQTtNQUNKLElBQUMsQ0FBQSxNQUFELENBQVEsRUFBUjtBQUNBO0FBQUE7TUFBQSxLQUFBLHFDQUFBOztxQkFDSSxJQUFDLENBQUEsTUFBTSxDQUFDLElBQVIsQ0FBYSxJQUFJLEtBQUosQ0FBVSxHQUFWLEVBQWUsSUFBZixDQUFiO01BREosQ0FBQTs7SUFGRTs7SUFTTixNQUFRLENBQUMsR0FBRCxDQUFBO0FBQ1osVUFBQSxJQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxLQUFBLEVBQUEsR0FBQSxFQUFBO01BQVEsSUFBQSxHQUFPLE1BQUEsQ0FBTyxHQUFQLEVBQVcsR0FBWDtBQUNQO0FBQUE7TUFBQSxLQUFBLHFDQUFBOztxQkFDSSxLQUFLLENBQUMsT0FBTixDQUFjLElBQUksQ0FBQyxJQUFMLENBQVUsS0FBSyxDQUFDLElBQU4sQ0FBQSxDQUFWLENBQWQ7TUFESixDQUFBOztJQUZJOztFQWxDWjs7RUF3Q0EsSUFBRyxnREFBSDtJQUVJLGdCQUFBLEdBQW1CLElBQUksZ0JBQUosQ0FBQTtJQUNuQixnQkFBZ0IsQ0FBQyxJQUFqQixDQUFzQixrQkFBdEI7SUFDQSxNQUFNLENBQUMsZ0JBQVAsR0FBMEIsaUJBSjlCOztBQWpTRyIsInNvdXJjZXNDb250ZW50IjpbIiMjIypcbiAqIHNvdXJjZTogbmVpZ2hib3Job29kX21hcC5jb2ZmZWVcbiMjI1xuXG4jIyNcbiAqICBJU0MgTGljZW5zZSAoSVNDKVxuICogIENvcHlyaWdodCAoYykgMjAxNiwgQWwgQ2FycnV0aCA8YWwuY2FycnV0aEBnbWFpbC5jb20+XG4gKiBcbiAqICBQZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvclxuICogIGFueSBwdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQsIHByb3ZpZGVkIHRoYXQgdGhlXG4gKiAgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBhcHBlYXIgaW4gYWxsXG4gKiAgY29waWVzLlxuICpcbiAqICBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTExcbiAqICBXQVJSQU5USUVTIFdJVEggUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEXG4gKiAgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuICogIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsIElORElSRUNULCBPUlxuICogIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NIExPU1NcbiAqICBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsXG4gKiAgTkVHTElHRU5DRSBPUiBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOXG4gKiAgQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1IgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cbiMjI1xuXG5fX19kdW1teV9fXyA9ICdpZ25vcmUgdGhpcyAhLSknXG5cbiMjIyBDbGFzcyBNZW51X1ZpZXcgIyMjXG4jIyMqXG4gKiBBIE1lbnVfVmlldyBpcyBhIHZpZXcgb2YgdGhlIG5laWdoYm9yaG9vZCBwbGFjZXMgYXMgYSBsaXN0IG9mIGNsaWNrYWJsZSBpdGVtc1xuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge05laWdoYm9yaG9vZF9NYXB9IGFwcCAtIHRoZSBtYWluIG5laWdoYm9yaG9vZCBtYXAgaW5zdGFuY2VcbiMjI1xuY2xhc3MgTWVudV9WaWV3XG5cbiAgICAjIyMgY29uc3RydWN0b3IgIyMjXG4gICAgY29uc3RydWN0b3I6IChAYXBwKSAtPlxuICAgICAgICBAbWVudV9FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnUtdmlldycpXG4gICAgICAgIEBtZW51X0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51LWJ1dHRvbicpXG4gICAgICAgIEBoaWRkZW4gPSBrby5vYnNlcnZhYmxlKGZhbHNlKVxuXG4gICAgIyMjKlxuICAgICAqIG1ldGhvZCB0b2dnbGUoKVxuICAgICAqIHRvZ2dsZXMgdGhlIHZpc2liaWxpdHkgb2YgdGhlIG1lbnVcbiAgICAjIyNcbiAgICB0b2dnbGU6ID0+IEBoaWRkZW4obm90IEBoaWRkZW4oKSlcblxuXG4jIyMgQ2xhc3MgTWFwX1ZpZXcgIyMjXG4jIyMqXG4gKiBBIE1hcF9WaWV3IGlzIGEgdmlldyBvZiB0aGUgbmVpZ2hib2hvb2QgcGxhY2VzIG9uIGEgbWFwLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge05laWdoYm9yaG9vZF9NYXB9IGFwcCAtIHRoZSBtYWluIG5laWdoYm9yaG9vZCBtYXAgaW5zdGFuY2VcbiMjI1xuY2xhc3MgTWFwX1ZpZXdcblxuICAgICMjIyBjb25zdHJ1Y3RvciAjIyNcbiAgICBjb25zdHJ1Y3RvcjogKEBhcHApIC0+XG4gICAgICAgIEBtYXBfRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAtdmlldycpXG4gICAgICAgIEBnbV9yZXF1ZXN0ID0gQGFwcC5nb29nbGVfTWFwcy5nZXQoe1xuICAgICAgICAgICAgcXVlcnk6IHsgbGlicmFyaWVzOiAncGxhY2VzJyB9XG4gICAgICAgICAgICBzdWNjZXNzOiBAaW5pdFxuICAgICAgICAgICAgZXJyb3I6IEBlcnJvclxuICAgICAgICAgICAgbXNlYzogMzAwMFxuICAgICAgICB9KVxuXG4gICAgaW5pdDogPT5cbiAgICAgICAgQG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoIEBtYXBfRWxlbWVudCwge1xuICAgICAgICAgICAgY2VudGVyOiB7IGxhdDogMzAuMjcxMjQwNiwgbG5nOiAtOTcuNzU1NTkwMSB9LCBcbiAgICAgICAgICAgIHNjcm9sbHdoZWVsOiB0cnVlLFxuICAgICAgICAgICAgem9vbTogMTMsXG4gICAgICAgICAgICBkaXNhYmxlRGVmYXVsdFVJOiB0cnVlLFxuICAgICAgICAgICAgY2FsbGJhY2s6IEBlcnJvclxuICAgICAgICB9KVxuICAgICAgICBAYXBwLm1hcF9SZWFkeSgpXG4gICAgICAgICAgICBcbiAgICBlcnJvcjogKGVycikgPT5cbiAgICAgICAgd2luZG93LmFsZXJ0KFwiR29vZ2xlIE1hcHMgaXMgY3VycmVudGx5IHVuYXZhaWxhYmxlXCIpXG5cblxuIyMjIENsYXNzIE1hcmtlcl9WaWV3ICMjI1xuIyMjKlxuICogQSBNYXJrZXJfVmlldyBpcyBhIHZpZXcgb2YgYSBwbGFjZSBhcyBhIG1hcCBtYXJrZXIgb24gdGhlIG1hcC5cbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtQTGFjZX0gcGxhY2UgLSBhbiBpbnN0YW5jZSBvZiB0aGUgUGxhY2UgY2xhc3MgXG4gKiBAcGFyYW0ge01hcF9WaWV3fSBtYXBfVmlldyAtIGFuIGluc3RhbmNlIG9mIHRoZSBNYXBfVmlldyBjbGFzcyBcbiMjI1xuY2xhc3MgTWFya2VyX1ZpZXdcblxuICAgIG1hcmtlcl9JY29uID0gXCJodHRwczovL21hcHMuZ29vZ2xlLmNvbS9tYXBmaWxlcy9tcy9pY29ucy9ncmVlbi1kb3QucG5nXCJcbiAgICBtYXJrZXJfSGlnaGxpZ2h0X0ljb24gPSBcImh0dHBzOi8vbWFwcy5nb29nbGUuY29tL21hcGZpbGVzL21zL2ljb25zL2JsdWUtZG90LnBuZ1wiXG5cbiAgICAjIyMgY29uc3RydWN0b3IgIyMjXG4gICAgY29uc3RydWN0b3I6IChAcGxhY2UsIEBtYXBfVmlldykgLT5cbiAgICAgICAgQG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICAgICAgcG9zaXRpb246IEBwbGFjZS5sb2MsXG4gICAgICAgICAgICBvcHRpbWl6ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgekluZGV4OjEwMDAsXG4gICAgICAgICAgICBtYXA6IEBtYXBfVmlldy5tYXAsXG4gICAgICAgICAgICB0aXRsZTogQHBsYWNlLm5hbWUoKSxcbiAgICAgICAgICAgIGljb246IG1hcmtlcl9JY29uLFxuICAgICAgICAgICAgb3BhY2l0eTogMS4wXG4gICAgICAgIH0pXG4gICAgICAgIEBtYXJrZXIuYWRkTGlzdGVuZXIoJ2NsaWNrJywgQHBsYWNlLmNsaWNrKVxuICAgICAgICBAcGxhY2UudmlzaWJsZS5zdWJzY3JpYmUoQGRpc3BsYXkpXG4gICAgICAgIEBwbGFjZS5zZWxlY3RlZC5zdWJzY3JpYmUoQGhpZ2hsaWdodClcblxuICAgICMjIyBtZXRob2QgZGlzcGxheSgpICMjI1xuICAgIGRpc3BsYXk6IChzaG93X21hcmtlcikgPT5cbiAgICAgICAgQG1hcmtlci5zZXRWaXNpYmxlKHNob3dfbWFya2VyKVxuXG4gICAgIyMjIG1ldGhvZCBoaWdobGlnaHQoKSAjIyNcbiAgICBoaWdobGlnaHQ6IChobF90cnVlKSA9PlxuICAgICAgICBpZiBobF90cnVlXG4gICAgICAgICAgICBAbWFya2VyLnNldEljb24obWFya2VyX0hpZ2hsaWdodF9JY29uKVxuICAgICAgICAgICAgQG1hcmtlci5zZXRaSW5kZXgoMTAwMSlcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgQG1hcmtlci5zZXRJY29uKG1hcmtlcl9JY29uKVxuICAgICAgICAgICAgQG1hcmtlci5zZXRaSW5kZXgoMTAwMClcblxuXG4jIyMgQ2xhc3MgSW5mb19WaWV3ICMjI1xuIyMjKlxuICogQW4gSW5mb19WaWV3IGlzIGEgdmlldyBvZiBhIFBsYWNlIGFzIGEgcG9wdXAgSW5mb1dpbmRvd1xuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge1BsYWNlfSBwbGFjZVxuICogQHBhcmFtIHtNYXBfVmlld30gbWFwX1ZpZXdcbiAqIEBwYXJhbSB7TWFya2VyX1ZpZXd9IG1hcmtlcl9WaWV3XG4jIyNcbmNsYXNzIEluZm9fVmlld1xuXG4gICAgIyMjIGNvbnN0cnVjdG9yICMjI1xuICAgIGNvbnN0cnVjdG9yOiAoQHBsYWNlLCBAbWFwX1ZpZXcsIEBtYXJrZXJfVmlldykgLT5cbiAgICAgICAgQHdpa2lwZWRpYV9JbmZvID0gdW5kZWZpbmVkXG4gICAgICAgIHMgPSAnPHNwYW4gY2xhc3M9XCJlcnJvci1tc2dcIj4gV2lraXBlZGlhIGlzIGN1cnJlbnRseSB1bmF2YWlsYWJsZS4gPC9zcGFuPiA8YnI+J1xuICAgICAgICBAZXJyb3JfTXNnID0gcyArICc8c3BhbiBjbGFzcz1cImVycm9yLW1zZ1wiPiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLiA8L3NwYW4+J1xuICAgICAgICBAaW5mb19XaW5kb3cgPSBuZXcgZ29vZ2xlLm1hcHMuSW5mb1dpbmRvdyggbWF4V2lkdGg6IDI1MCApXG4gICAgICAgIEBpbmZvX1dpbmRvdy5hZGRMaXN0ZW5lcignY2xvc2VjbGljaycsIEBwbGFjZS5jbGljaylcbiAgICAgICAgQHBsYWNlLnNob3dfaW5mby5zdWJzY3JpYmUoQGRpc3BsYXkpXG5cbiAgICAjIyMqXG4gICAgICogbWV0aG9kIGRpc3BsYXlfSW5mbygpXG4gICAgICogaGVscGVyIGZ1bmN0aW9uIGZvciBtZXRob2QgZGlzcGxheV9XaWtpcGVkaWFfSW5mbygpXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiAtIGNvbnRhaW5zIHRpdGxlLCBkZXNjcmlwdGlvbiBhbmQgdXJsXG4gICAgIyMjXG4gICAgZGlzcGxheV9JbmZvOiAob2JqKSA9PlxuICAgICAgICBzID0gJycgK1xuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJpbmZvLXdpbmRvd1wiPicgK1xuICAgICAgICAgICAgJzxoMSBjbGFzcz1cImluZm8td2luZG93LWgxXCI+JyArIG9iai50aXRsZSArICc8L2gxPicgK1xuICAgICAgICAgICAgJzxwIGNsYXNzPVwiaW5mby13aW5kb3ctcFwiPicgKyBvYmouZGVzY3JpcHRpb24gKyAnPC9wPicgKyBcbiAgICAgICAgICAgICc8YSBocmVmPVwiJyArIG9iai51cmwgKyAnXCIgdGFyZ2V0PVwiX2JsYW5rXCI+IFdpa2lwZWRpYSA8L2E+JyArXG4gICAgICAgICAgICAnPC9kaXY+J1xuICAgICAgICBAaW5mb19XaW5kb3cuc2V0Q29udGVudChzKVxuICAgICAgICBAaW5mb19XaW5kb3cub3BlbihAbWFwX1ZpZXcubWFwLCBAbWFya2VyX1ZpZXcubWFya2VyKVxuXG4gICAgIyMjKlxuICAgICAqIG1ldGhvZCBkaXNwbGF5X1dpa2lwZWRpYV9JbmZvKClcbiAgICAgKiBkaXNwbGF5IGVpdGhlciB0aGUgaW5mbyBmcm9tIHdpa2lwZWRpYSBvciBhbiBlcnJvciBtZXNzYWdlXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBzaG93X21hcmtlciAtIHRvIGRpc3BsYXkgb3Igbm90IGRpc3BsYXlcbiAgICAjIyNcbiAgICBkaXNwbGF5X1dpa2lwZWRpYV9JbmZvOiA9PlxuICAgICAgICBpZiB0eXBlb2YoQHdpa2lwZWRpYV9JbmZvKSAhPSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgQGRpc3BsYXlfSW5mbyhAd2lraXBlZGlhX0luZm8pXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIEBwbGFjZS5hcHAud2lraXBlZGlhLm9wZW5TZWFyY2goIHtcbiAgICAgICAgICAgICAgICBzZWFyY2hfU3RyOiBAcGxhY2Uud2lraXBlZGlhX1RpdGxlLFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ICgoZGF0YSkgPT5cbiAgICAgICAgICAgICAgICAgICAgQHdpa2lwZWRpYV9JbmZvID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGRhdGFbMV1bMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZGF0YVsyXVswXVxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBkYXRhWzNdWzBdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgQGRpc3BsYXlfSW5mbyhAd2lraXBlZGlhX0luZm8pKSxcbiAgICAgICAgICAgICAgICBlcnJvcjogKD0+XG4gICAgICAgICAgICAgICAgICAgIEBkaXNwbGF5X0luZm8oe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IEBwbGFjZS5uYW1lKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogQGVycm9yX01zZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogXCJodHRwczovL2VuLndpa2lwZWRpYS5vcmcvXCJ9KSlcbiAgICAgICAgICAgICAgICB9KVxuXG4gICAgIyMjKlxuICAgICAqIG1ldGhvZCBkaXNwbGF5KClcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHNob3dfd2luZG93IC0gdG8gZGlzcGxheSBvciBub3QgZGlzcGxheVxuICAgICMjI1xuICAgIGRpc3BsYXk6IChzaG93X1dpbmRvdykgPT5cbiAgICAgICAgaWYgc2hvd19XaW5kb3dcbiAgICAgICAgICAgIEBkaXNwbGF5X1dpa2lwZWRpYV9JbmZvKClcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgQGluZm9fV2luZG93LmNsb3NlKClcblxuXG4jIyMgQ2xhc3MgUGxhY2UgIyMjXG4jIyMqXG4gKiBBIFBsYWNlIGlzIHBhcnQgb2YgdGhlIHZpZXcgbW9kZWwuICBJdCBpcyBjb25zdHJ1Y3RlZCBmcm9tIGEgc2ltcGxlIG9iamVjdFxuICogYW5kIGlzIGFzc29jaWF0ZWQgd2l0aCBhIE1hcmtlcl9WaWV3LCBhbiBJbmZvX1ZpZXcgYW5kIGFcbiAqIGRpdi5tZW51LWxpc3QtaXRlbSBlbGVtZW50IGFzIHBhcnQgb2YgdGhlIE1lbnVfVmlldy5cbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtvYmplY3R9IG9iaiAtIGEgc2ltcGxlIG9iamVjdCBjb250YWluaW5nIHRoZSBuYW1lLCBsb2NhdGlvbiBhbmQgd2lraXBlZGlhIHRpdGxlXG4gKiBAcGFyYW0ge05laWdoYm9yaG9vZF9NYXB9IEBhcHAgLSB0aGUgbWFpbiBhcHAgaW5zdGFuY2VcbiMjI1xuY2xhc3MgUGxhY2VcblxuICAgICMjIyBjb25zdHJ1Y3RvciAjIyNcbiAgICBjb25zdHJ1Y3RvcjogKG9iaiwgQGFwcCkgLT5cbiAgICAgICAgQGxvYyA9IG9iai5sb2NcbiAgICAgICAgQG5hbWUgPSBrby5vYnNlcnZhYmxlKG9iai5uYW1lKVxuICAgICAgICBAd2lraXBlZGlhX1RpdGxlID0gb2JqLndpa2lwZWRpYV90aXRsZVxuICAgICAgICBAc3RhdGUgPSBrby5vYnNlcnZhYmxlKDEpXG4gICAgICAgIEBoaWRkZW4gPSBrby5jb21wdXRlZCg9PiBAc3RhdGUoKSA9PSAwKVxuICAgICAgICBAdmlzaWJsZSA9IGtvLmNvbXB1dGVkKD0+IEBzdGF0ZSgpID4gMClcbiAgICAgICAgQHNlbGVjdGVkID0ga28uY29tcHV0ZWQoPT4gQHN0YXRlKCkgPiAxKVxuICAgICAgICAjQHNob3dfaW5mbyA9IGtvLmNvbXB1dGVkKD0+IEBzdGF0ZSgpID4gMilcbiAgICAgICAgQHNob3dfaW5mbyA9IGtvLmNvbXB1dGVkKD0+IEBzdGF0ZSgpID4gMSlcblxuICAgIG1hcF9SZWFkeTogPT5cbiAgICAgICAgQG1hcmtlcl9WaWV3ID0gbmV3IE1hcmtlcl9WaWV3KHRoaXMsIEBhcHAubWFwX1ZpZXcpXG4gICAgICAgIEBpbmZvX1ZpZXcgPSBuZXcgSW5mb19WaWV3KHRoaXMsIEBhcHAubWFwX1ZpZXcsIEBtYXJrZXJfVmlldylcbiAgICAgICAgXG4gICAgIyMjKlxuICAgICAqIG1ldGhvZCBjbGljaygpIGhhbmRsZXMgYWxsIGNsaWNrcyB3aGV0aGVyIG9uIHRoZSBtZW51IGl0ZW1zIG9yXG4gICAgICogb24gdGhlIG1hcCBtYXJrZXJzIGFuZCBjeWNsZXMgdGhyb3VnaCB0aGUgc3RhdGVzIGFwcHJvcHJpYXRlbHlcbiAgICAjIyNcbiAgICBjbGljazogPT5cbiAgICAgICAgXG4gICAgICAgICMjIyBkZS1zZWxlY3QgYWxsIG90aGVyIHBsYWNlcyAjIyNcbiAgICAgICAgZm9yIHBsYWNlIGluIEBhcHAucGxhY2VzKClcbiAgICAgICAgICAgIGlmIHBsYWNlICE9IHRoaXMgYW5kIHBsYWNlLnN0YXRlKCkgPiAxXG4gICAgICAgICAgICAgICAgcGxhY2Uuc3RhdGUoMSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgIyMjIGNoYW5nZSB0byBuZXh0IHN0YXRlICMjI1xuICAgICAgICAjQHN0YXRlKFsxLDIsMywyXVtAc3RhdGUoKV0pXG4gICAgICAgIEBzdGF0ZShbMSwyLDFdW0BzdGF0ZSgpXSlcblxuICAgICAgICAjIyMgaGlkZSB0aGUgbWVudSBhZnRlciBzZWxlY3Rpb24gd2hlbiBpbiBjZWxsIHBob25lIG1vZGUuICMjI1xuICAgICAgICBpZiB3aW5kb3cuaW5uZXJXaWR0aCA8IDcwMFxuICAgICAgICAgICAgQGFwcC5tZW51X1ZpZXcuaGlkZGVuKHRydWUpXG5cbiAgICAjIyMqXG4gICAgICogbWV0aG9kIGRpc3BsYXlcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGJvb2xlYW5fZXhwciAtIHRvIGRpc3BsYXkgb3Igbm90IGRpc3BsYXlcbiAgICAjIyNcbiAgICBkaXNwbGF5OiAoYm9vbF9leHByKSA9PlxuICAgICAgICBpZiBib29sX2V4cHJcbiAgICAgICAgICAgIEBzdGF0ZShNYXRoLm1heCgxLCBAc3RhdGUoKSkpXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIEBzdGF0ZSgwKVxuXG5cbiMjIyBDbGFzcyBOZWlnaGJvcmhvb2RfTWFwICMjI1xuIyMjKlxuICogQW4gaW5zdGFuY2Ugb2YgY2xhc3MgTmVpZ2hib3Job29kX01hcCBpcyB0aGUgbWFpbiBhcHAuXG4gKiBAY29uc3RydWN0b3JcbiMjI1xuY2xhc3MgTmVpZ2hib3Job29kX01hcFxuXG4gICAgIyMjIGNvbnN0cnVjdG9yICMjI1xuICAgIGNvbnN0cnVjdG9yOiAtPlxuICAgICAgICBAd2lraXBlZGlhID0gbmV3IFdpa2lwZWRpYSgnTWFwIG9mIEF1c3RpbiBwbGFjZXMnKVxuICAgICAgICBAZ29vZ2xlX01hcHMgPSBuZXcgR29vZ2xlX01hcHMoXCJBSXphU3lCanRWRHBlVkw4SnpoWXFDWHQ4ZDZFM2JSYW5hTkNYRW9cIilcbiAgICAgICAgQHBsYWNlcyA9IGtvLm9ic2VydmFibGVBcnJheShbXSlcbiAgICAgICAgQG1lbnVfVmlldyA9IG5ldyBNZW51X1ZpZXcodGhpcylcbiAgICAgICAgQG1hcF9WaWV3ID0gbmV3IE1hcF9WaWV3KHRoaXMpXG4gICAgICAgIEBhcHBfRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZWlnaGJvcmhvb2QtbWFwJylcbiAgICAgICAgQHNlYXJjaF9TdHIgPSBrby5vYnNlcnZhYmxlKCcnKVxuICAgICAgICBAc2VhcmNoX1N0ci5zdWJzY3JpYmUoQHNlYXJjaClcbiAgICAgICAga28uYXBwbHlCaW5kaW5ncyggdGhpcywgQGFwcF9FbGVtZW50KVxuXG4gICAgIyMjKlxuICAgICAqIG1ldGhvZCBtYXBfUmVhZHlcbiAgICAjIyNcbiAgICBtYXBfUmVhZHk6ID0+XG4gICAgICAgIGZvciBwbGFjZSBpbiBAcGxhY2VzKClcbiAgICAgICAgICAgIHBsYWNlLm1hcF9SZWFkeSgpXG4gICAgICAgICAgICBcbiAgICAjIyMqXG4gICAgICogbWV0aG9kIGluaXRcbiAgICAgKiBAcGFyYW0ge0pTT059IHBsYWNlc19KU09OIC0gYSBqc29uIHN0cmluZyByZXByZXNlbnRpbmcgYW4gYXJyYXkgb2Ygc2ltcGxlIHBsYWNlIG9iamVjdHNcbiAgICAjIyNcbiAgICBpbml0OiAoQHBsYWNlc19KU09OKSA9PlxuICAgICAgICBAcGxhY2VzKFtdKVxuICAgICAgICBmb3Igb2JqIGluIEpTT04ucGFyc2UoQHBsYWNlc19KU09OKVxuICAgICAgICAgICAgQHBsYWNlcy5wdXNoKG5ldyBQbGFjZShvYmosIHRoaXMpKVxuXG4gICAgIyMjKlxuICAgICAqIG1ldGhvZCBzZWFyY2hcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0IC0gdGhlIHBhdGVybiB0byBzZWFyY2ggZm9yXG4gICAgIyMjXG4gICAgc2VhcmNoOiAocGF0KSA9PlxuICAgICAgICBleHByID0gUmVnRXhwKHBhdCwnaScpXG4gICAgICAgIGZvciBwbGFjZSBpbiBAcGxhY2VzKClcbiAgICAgICAgICAgIHBsYWNlLmRpc3BsYXkoZXhwci50ZXN0KHBsYWNlLm5hbWUoKSkpXG5cblxuaWYgd2luZG93P1xuICAgIFxuICAgIG5laWdoYm9yaG9vZF9NYXAgPSBuZXcgTmVpZ2hib3Job29kX01hcCgpXG4gICAgbmVpZ2hib3Job29kX01hcC5pbml0KGF1c3Rpbl9QbGFjZXNfSlNPTilcbiAgICB3aW5kb3cubmVpZ2hib3Job29kX01hcCA9IG5laWdoYm9yaG9vZF9NYXBcbiJdfQ==
//# sourceURL=/usr/local/server/git/clones/als-austin-map/src/coffee/neighborhood_map.coffee