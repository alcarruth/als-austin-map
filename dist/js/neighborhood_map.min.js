(function(){var i,t,e,s,n,a,o,r=function(i,t){return function(){return i.apply(t,arguments)}};s=function(){function i(i){this.app=i,this.toggle=r(this.toggle,this),this.menu_Element=document.getElementById("menu-view"),this.menu_Button=document.getElementById("menu-button"),this.hidden=ko.observable(!1)}return i.prototype.toggle=function(){return this.hidden(!this.hidden())},i}(),t=function(){function i(i){this.app=i,this.error=r(this.error,this),this.init=r(this.init,this),this.map_Element=document.getElementById("map-view"),this.gm_request=this.app.google_Maps.get({query:{libraries:"places"},success:this.init,error:this.error,msec:3e3})}return i.prototype.init=function(){return this.map=new google.maps.Map(this.map_Element,{center:{lat:30.2712406,lng:-97.7555901},scrollwheel:!0,zoom:13,disableDefaultUI:!0,callback:this.error}),this.app.map_Ready()},i.prototype.error=function(i){return window.alert("Google Maps is currently unavailable")},i}(),e=function(){function i(i,t){this.place=i,this.map_View=t,this.highlight=r(this.highlight,this),this.display=r(this.display,this),this.marker=new google.maps.Marker({position:this.place.loc,optimized:!1,zIndex:1e3,map:this.map_View.map,title:this.place.name(),icon:e,opacity:1}),this.marker.addListener("click",this.place.click),this.place.visible.subscribe(this.display),this.place.selected.subscribe(this.highlight)}var t,e;return e="https://maps.google.com/mapfiles/ms/icons/green-dot.png",t="https://maps.google.com/mapfiles/ms/icons/blue-dot.png",i.prototype.display=function(i){return this.marker.setVisible(i)},i.prototype.highlight=function(i){return i?(this.marker.setIcon(t),this.marker.setZIndex(1001)):(this.marker.setIcon(e),this.marker.setZIndex(1e3))},i}(),i=function(){function i(i,t,e){var s;this.place=i,this.map_View=t,this.marker_View=e,this.display=r(this.display,this),this.display_Wikipedia_Info=r(this.display_Wikipedia_Info,this),this.display_Info=r(this.display_Info,this),this.wikipedia_Info=void 0,s='<span class="error-msg"> Wikipedia is currently unavailable. </span> <br>',this.error_Msg=s+'<span class="error-msg"> Please try again later. </span>',this.info_Window=new google.maps.InfoWindow({maxWidth:250}),this.info_Window.addListener("closeclick",this.place.click),this.place.show_info.subscribe(this.display)}return i.prototype.display_Info=function(i){var t;return t='<div class="info-window"><h1 class="info-window-h1">'+i.title+'</h1><p class="info-window-p">'+i.description+'</p><a href="'+i.url+'" target="_blank"> Wikipedia </a></div>',this.info_Window.setContent(t),this.info_Window.open(this.map_View.map,this.marker_View.marker)},i.prototype.display_Wikipedia_Info=function(){return void 0!==this.wikipedia_Info?this.display_Info(this.wikipedia_Info):this.place.app.wikipedia.openSearch({search_Str:this.place.wikipedia_Title,success:function(i){return function(t){return i.wikipedia_Info={title:t[1][0],description:t[2][0],url:t[3][0]},i.display_Info(i.wikipedia_Info)}}(this),error:function(i){return function(){return i.display_Info({title:i.place.name(),description:i.error_Msg,url:"https://en.wikipedia.org/"})}}(this)})},i.prototype.display=function(i){return i?this.display_Wikipedia_Info():this.info_Window.close()},i}(),a=function(){function t(i,t){this.app=t,this.display=r(this.display,this),this.click=r(this.click,this),this.map_Ready=r(this.map_Ready,this),this.loc=i.loc,this.name=ko.observable(i.name),this.wikipedia_Title=i.wikipedia_title,this.state=ko.observable(1),this.hidden=ko.computed(function(i){return function(){return 0===i.state()}}(this)),this.visible=ko.computed(function(i){return function(){return i.state()>0}}(this)),this.selected=ko.computed(function(i){return function(){return i.state()>1}}(this)),this.show_info=ko.computed(function(i){return function(){return i.state()>1}}(this))}return t.prototype.map_Ready=function(){return this.marker_View=new e(this,this.app.map_View),this.info_View=new i(this,this.app.map_View,this.marker_View)},t.prototype.click=function(){var i,t,e,s;for(s=this.app.places(),i=0,t=s.length;i<t;i++)(e=s[i])!==this&&e.state()>1&&e.state(1);if(this.state([1,2,1][this.state()]),window.innerWidth<700)return this.app.menu_View.hidden(!0)},t.prototype.display=function(i){return i?this.state(Math.max(1,this.state())):this.state(0)},t}(),n=function(){function i(){this.search=r(this.search,this),this.init=r(this.init,this),this.map_Ready=r(this.map_Ready,this),this.wikipedia=new Wikipedia("Map of Austin places"),this.google_Maps=new Google_Maps("AIzaSyBjtVDpeVL8JzhYqCXt8d6E3bRanaNCXEo"),this.places=ko.observableArray([]),this.menu_View=new s(this),this.map_View=new t(this),this.app_Element=document.getElementById("neighborhood-map"),this.search_Str=ko.observable(""),this.search_Str.subscribe(this.search),ko.applyBindings(this,this.app_Element)}return i.prototype.map_Ready=function(){var i,t,e,s,n;for(s=this.places(),n=[],i=0,t=s.length;i<t;i++)e=s[i],n.push(e.map_Ready());return n},i.prototype.init=function(i){var t,e,s,n,o;for(this.places_JSON=i,this.places([]),n=JSON.parse(this.places_JSON),o=[],t=0,e=n.length;t<e;t++)s=n[t],o.push(this.places.push(new a(s,this)));return o},i.prototype.search=function(i){var t,e,s,n,a,o;for(t=RegExp(i,"i"),a=this.places(),o=[],e=0,s=a.length;e<s;e++)n=a[e],o.push(n.display(t.test(n.name())));return o},i}(),"undefined"!=typeof window&&null!==window&&(o=new n,o.init(austin_Places_JSON),window.neighborhood_Map=o)}).call(this);